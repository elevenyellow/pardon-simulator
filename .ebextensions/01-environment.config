option_settings:
  # Instance configuration
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.medium
    IamInstanceProfile: arn:aws:iam::640080112933:instance-profile/aws-elasticbeanstalk-ec2-role
    RootVolumeSize: 30
    
  # Auto-scaling configuration
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 3
    Cooldown: 360
    
  # Auto-scaling triggers (scale based on CPU)
  aws:autoscaling:trigger:
    MeasureName: CPUUtilization
    Statistic: Average
    Unit: Percent
    UpperThreshold: 75
    UpperBreachScaleIncrement: 1
    LowerThreshold: 25
    LowerBreachScaleIncrement: -1
    
  # Load balancer settings (Application Load Balancer)
  aws:elasticbeanstalk:environment:
    EnvironmentType: LoadBalanced
    LoadBalancerType: application
    ServiceRole: arn:aws:iam::640080112933:role/aws-elasticbeanstalk-service-role
    
  # Load balancer listener (port 5555 for Coral Server)
  aws:elbv2:listener:5555:
    Protocol: HTTP
    ListenerEnabled: true
    DefaultProcess: default
    Rules: ''
  
  # Process configuration for health checks and routing
  aws:elasticbeanstalk:environment:process:default:
    Port: '5555'
    Protocol: HTTP
    HealthCheckPath: /health
    HealthCheckInterval: '30'
    HealthCheckTimeout: '5'
    HealthyThresholdCount: '2'
    UnhealthyThresholdCount: '3'
    
  # Health check configuration (now handled by process:default above)
    
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
    
  # CloudWatch Logs
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 7
    
  aws:elasticbeanstalk:cloudwatch:logs:health:
    HealthStreamingEnabled: true
    DeleteOnTerminate: false
    RetentionInDays: 7
    
  # Docker configuration
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: none

